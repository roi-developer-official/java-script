(()=>{class t{constructor(){this.rangeText=document.querySelector(".range_text"),this.rangeInput=document.getElementById("range_input"),this.generateNewArrayBtn=document.querySelector(".nav_item__array_generete"),this.arrayCellsList=document.querySelector(".array_cells__items"),this.sortBtn=document.querySelector(".nav_item_sort"),this.sortBtns=document.querySelectorAll(".item_sort__btn"),this.algorithm=""}initListeners(){this.sortBtn.addEventListener("click",this.beforeSort.bind(this)),this.generateNewArrayBtn.addEventListener("click",this.genrerateNewArray.bind(this)),this.rangeInput.addEventListener("input",(()=>{this.rangeText.textContent=this.rangeInput.value,this.resizeArray()}))}init(){this.originalArray,this.rangeInput.value=4,this.rangeText.textContent=4,this.generateArray()}generateArray(){this.originalArray=document.createElement("ul");for(let t=0;t<35;t++){const e=document.createElement("li");e.className="array_cell",e.id=t;const r=200*Math.random();e.style.height=r+23+"px",e.value=r,e.style.left=22*t+"px",this.appendTextNumber(e,r),this.originalArray.append(e)}for(let t=0;t<4;t++){let e=this.originalArray.children[t].cloneNode(!0);this.arrayCellsList.append(e)}}resizeArray(){let t=this.arrayCellsList;for(;t.firstChild;)t.firstChild.remove();for(let t=0;t<this.rangeInput.value;t++){let e=this.originalArray.children[t].cloneNode(!0);t%2!=0&&t>3?this.arrayCellsList.prepend(e):this.arrayCellsList.append(e)}for(let t=0;t<this.arrayCellsList.children.length;t++)this.arrayCellsList.children[t].id=t}genrerateNewArray(){let t=this.originalArray;for(;t.firstChild;)t.removeChild(t.firstChild);for(let t=0;t<35;t++){const e=document.createElement("li");e.className="array_cell",e.id=t;const r=200*Math.random();e.style.height=r+23+"px",e.value=r,e.style.left=22*t+"px",this.appendTextNumber(e,r),this.originalArray.append(e)}this.resizeArray()}createElements(){let t=this.arrayCellsList.children.length;if(this.rangeInput.value>t){for(let e=t;e<this.rangeInput.value;e++){const t=document.createElement("li");t.className="array_cell",t.id=e;const r=200*Math.random();t.style.height=r+23+"px",t.value=r,t.style.left=22*e+"px",this.appendTextNumber(t,r),e%2==0?this.arrayCellsList.append(t):this.arrayCellsList.prepend(t)}for(let t=0;t<this.arrayCellsList.children.length;t++)this.arrayCellsList.children[t].id=t}else for(let e=t-1;e>=this.rangeInput.value;e--)e%2==0?this.arrayCellsList.removeChild(this.arrayCellsList.children[e]):this.arrayCellsList.removeChild(this.arrayCellsList.children[0])}beforeSort(){let t=this.arrayCellsList.children,e=!1;for(let r=0;r<t.length-1;r++)t[r].value>t[r+1].value&&(e=!0);if(void 0===this.algorithm)alert("please choose an algorithm");else{if(!e)return;for(let t of this.sortBtns)t.setAttribute("disabled",!0);this.sortBtn.setAttribute("disabled",!0),this.rangeInput.setAttribute("disabled",!0),this.generateNewArrayBtn.setAttribute("disabled",!0),this.generateNewArrayBtn.style.color="#ccc",this.sortBtn.style.color="#ccc",this.sort()}}sort(){switch(this.algorithm){case"bubble-sort":new s(this.arrayCellsList).sort();break;case"merge-sort":new a(this.arrayCellsList).sort();break;case"heap-sort":new l(this.arrayCellsList).sort();break;case"quick-sort":new i(this.arrayCellsList).sort()}}isSorted(t){let e=t.children;for(let t=0;t<e.length-1;t++)if(+e[t].value>e[t+1].value)return!0;return!1}appendTextNumber(t,e){const r=document.createElement("p");r.classList.add("number"),r.textContent=Math.floor(e),t.append(r)}}class e extends t{constructor(t){super(),this.array=t}onDoneSort(){if(this.isSorted(this.arrayCellsList))new a(this.arrayCellsList).sort();else{for(let t=0;t<this.arrayCellsList.children.length;t++)this.arrayCellsList.children[t].style.background="green";for(let t of this.sortBtns)t.removeAttribute("disabled",!0);this.rangeInput.removeAttribute("disabled",!0),this.sortBtn.removeAttribute("disabled",!0),this.sortBtn.style.color="white",this.generateNewArrayBtn.removeAttribute("disabled",!0),this.generateNewArrayBtn.style.color="white"}}switchNodes(t,e){let r=this.array[t].getBoundingClientRect().left-this.array[e].getBoundingClientRect().left;this.array[t].style.transform=`translateX(-${r}px)`,this.array[e].style.transform=`translateX(${r}px)`,this.array[e].addEventListener("transitionend",(()=>{this.array[t].style.transform="translateX(0)",this.array[e].style.transform="translateX(0)";let r=this.array[t].cloneNode(!0);this.array[t].parentNode.replaceChild(this.array[e].cloneNode(!0),this.array[t]),this.array[e].parentNode.replaceChild(r,this.array[e])}))}}let r=new class{initSelectors(){this.navSortingItems=document.querySelector(".nav_sotring__items"),this.bubbleSortBtn=document.querySelector(".nav_item_bubble_sort"),this.heapSortBtn=document.querySelector(".nav_item_heap_sort"),this.mergeSortBtn=document.querySelector(".nav_item_merge_sort"),this.quickSortBtn=document.querySelector(".nav_item_quick_sort")}initListeners(){this.bubbleSortBtn.addEventListener("click",(()=>{this.setAlgorithem("bubble-sort"),this.bubbleSortBtn.style.color="red"})),this.heapSortBtn.addEventListener("click",(()=>{this.setAlgorithem("heap-sort"),this.heapSortBtn.style.color="red"})),this.quickSortBtn.addEventListener("click",(()=>{this.setAlgorithem("quick-sort"),this.quickSortBtn.style.color="red"})),this.mergeSortBtn.addEventListener("click",(()=>{this.setAlgorithem("merge-sort"),this.mergeSortBtn.style.color="red"}))}init(){this.main=new t,this.main.initListeners(),this.main.init()}setAlgorithem(t){this.main.algorithm=t;for(let t of this.main.sortBtns)t.style.color="black"}};r.initSelectors(),r.initListeners(),r.init();class s extends e{constructor(t){super(t),this.array=t.children}sort(){let t=[],e=[];for(let e=0;e<this.array.length;e++)t.push(this.array[e].value);for(let r=0;r<t.length;r++)for(let r=1;r<t.length;r++)if(t[r]<t[r-1]){e.push(r),e.push(r-1);let s=t[r];t[r]=t[r-1],t[r-1]=s}let r=0,s=setInterval((()=>{if(r===e.length)return this.onDoneSort(),void clearInterval(s);this.switchNodes(e[r],e[r+1]),r+=2}),150)}}class i extends e{constructor(t){super(t),this.j=[],this.array=t.children}sort(){let t=[];for(let e=0;e<this.array.length;e++)t.push(this.array[e].value);this.quickSort(t,0,t.length-1);let e=0,r=setInterval((()=>{if(e>=this.j.length)return this.onDoneSort(),void clearInterval(r);this.switchNodes(this.j[e],this.j[e+1]),e+=2}),150)}quickSort(t,e,r){if(e>=r)return;let s=this.partition(t,e,r);this.quickSort(t,e,s-1),this.quickSort(t,s+1,r)}partition(t,e,r){let s=t[r],i=e-1;for(let l=e;l<=r;l++)if(t[l]<=s){i++,this.j.push(l),this.j.push(i);let e=t[i];t[i]=t[l],t[l]=e}return i}}class l extends e{constructor(t){super(t),this.j1=[],this.j2=[],this.array=t.children}sort(){let t=[];for(let e=0;e<this.array.length;e++)t.push(this.array[e].value);this.heapSort(t)}heapSort(t){let e=this.array.length;for(let r=Math.floor(e/2)-1;r>=0;r--)this.heapify(t,e,r);for(let r=e-1;r>0;r--){this.j2.push(r),this.j1.push(0);let e=t[0];t[0]=t[r],t[r]=e,this.heapify(t,r,0)}let r=0,s=setInterval((()=>{if(r===this.j1.length)return this.onDoneSort(),void clearInterval(s);this.switchNodes(this.j1[r],this.j2[r]),r++}),150)}heapify(t,e,r){let s=r,i=2*r+1,l=2*r+2;if(i<e&&t[i]>t[s]&&(s=i),l<e&&t[l]>t[s]&&(s=l),s!=r){this.j1.push(r),this.j2.push(s);let i=t[r];t[r]=t[s],t[s]=i,this.heapify(t,e,s)}}}class a extends e{constructor(t){super(t),this.indexes=[],this.cells=t.children,this.array=Array.from(t.childNodes)}sort(){this.indexes=[],this.mergeSort(this.array);let t=0,e=setInterval((()=>{if(t>=this.indexes.length)return this.onDoneSort(),void clearInterval(e);this.switchNodes(this.indexes[t],this.indexes[t+1]),t+=2}),150)}mergeSort(t){if(t.length<=1)return t;let e=Math.ceil(t.length/2);const r=this.mergeSort(t.splice(0,e)),s=this.mergeSort(t.splice(-e));return this.merge(r,s)}merge(t,e){let r=[],s=0,i=0,l=[];for(;s<t.length&&i<e.length;)+t[s].value<+e[i].value?r.push(t[s++]):r.push(e[i++]);for(;s<t.length;)r.push(t[s++]);for(;i<e.length;)r.push(e[i++]);for(let t=0;t<r.length;t++)l.push(r[t].id);return this.replaceNodes(l),r}switchNodes(t,e){let r=this.cells[t].getBoundingClientRect().left-this.cells[e].getBoundingClientRect().left;this.cells[t].style.transform=`translateX(-${r}px)`,this.cells[e].style.transform=`translateX(${r}px)`,this.cells[e].addEventListener("transitionend",(()=>{this.cells[t].style.transform="translateX(0)",this.cells[e].style.transform="translateX(0)";let r=this.cells[t].cloneNode(!0);this.cells[t].parentNode.replaceChild(this.cells[e].cloneNode(!0),this.cells[t]),this.cells[e].parentNode.replaceChild(r,this.cells[e])}))}replaceNodes(t){let e,r=this.cells,s=[],i=[];t.forEach((t=>s.push(Number.parseInt(t)))),e=s.reduce(((t,e)=>t<e?t:e)),s.map((t=>{for(let e=0;e<r.length;e++)t==r[e].id&&i.push(r[e].cloneNode(!0))}));let l=e,a=0,n=setInterval((()=>{if(a>=i.length)return void clearInterval(n);let t;for(let e=0;e<r.length;e++)if(r[e].id==i[a].id){t=e;break}if(r[l].id!==r[t].id){this.indexes.push(t),this.indexes.push(l);let e=r[l].id;r[l].id=r[t].id,r[t].id=e}a++,l++}),0)}}})();